function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function ownKeys(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach((function(e){_defineProperty(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function _defineProperty(t,e,o){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var FormManagementSystem=function(){return _createClass((function t(){_classCallCheck(this,t),this.currentMonth=new Date,this.forms=this.loadFromStorage(),this.init()}),[{key:"init",value:function(){var t=this;this.updateCurrentDate(),this.updateCurrentMonth(),this.renderForms(),this.updateStats(),this.setupEventListeners(),setInterval((function(){return t.updateCurrentDate()}),6e4)}},{key:"setupEventListeners",value:function(){var t=this;document.addEventListener("input",(function(e){e.target.classList.contains("form-textarea")&&t.autoSave()})),document.addEventListener("keydown",(function(e){if(e.target.classList.contains("form-textarea")&&"Enter"===e.key&&!e.shiftKey){e.preventDefault();var o=e.target,n=o.selectionStart,r=o.selectionEnd;o.value=o.value.substring(0,n)+"\n"+o.value.substring(r),o.selectionStart=o.selectionEnd=n+1,t.autoSave()}}))}},{key:"updateCurrentDate",value:function(){var t=new Date;document.getElementById("current-date").textContent=t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}},{key:"updateCurrentMonth",value:function(){var t="".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][this.currentMonth.getMonth()]," ").concat(this.currentMonth.getFullYear());document.getElementById("current-month").textContent=t,document.getElementById("nav-month").textContent=t}},{key:"formatDate",value:function(t){var e=String(t.getDate()).padStart(2,"0"),o=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();return"".concat(e,"/").concat(o,"/").concat(n)}},{key:"formatDateTime",value:function(t){var e=this.formatDate(t),o=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return"".concat(e," ").concat(o)}},{key:"loadFromStorage",value:function(){try{var t=localStorage.getItem("payroll-forms");return t?JSON.parse(t):{}}catch(t){return console.error("Error loading from storage:",t),{}}}},{key:"saveToStorage",value:function(){try{localStorage.setItem("payroll-forms",JSON.stringify(this.forms)),this.updateLastUpdated()}catch(t){console.error("Error saving to storage:",t),this.showToast("Error saving data","error")}}},{key:"autoSave",value:function(){var t=this;clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout((function(){t.saveAllForms()}),1e3)}},{key:"saveAllForms",value:function(){var t=this;document.querySelectorAll(".form-textarea").forEach((function(e){var o=e.dataset.formId;o&&t.forms[o]&&(t.forms[o].content=e.value,t.forms[o].lastModified=(new Date).toISOString())})),this.saveToStorage()}},{key:"updateLastUpdated",value:function(){var t=(new Date).toLocaleString();document.getElementById("last-updated").textContent=t}},{key:"getMonthKey",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentMonth;return"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"))}},{key:"getCurrentMonthForms",value:function(){var t=this.getMonthKey();return Object.values(this.forms).filter((function(e){return e.monthKey===t})).sort((function(t,e){return new Date(e.createdAt)-new Date(t.createdAt)}))}},{key:"addNewForm",value:function(){var t=new Date,e="form_".concat(t.getTime()),o=this.getMonthKey(),n={id:e,createdAt:t.toISOString(),lastModified:t.toISOString(),monthKey:o,content:"",date:this.formatDate(t)};this.forms[e]=n,this.saveToStorage(),this.renderForms(),this.updateStats(),setTimeout((function(){var t=document.querySelector('[data-form-id="'.concat(e,'"]'));t&&t.focus()}),100),this.showToast("New form added successfully!")}},{key:"deleteForm",value:function(t){this.forms[t]&&(delete this.forms[t],this.saveToStorage(),this.renderForms(),this.updateStats(),this.showToast("Form deleted successfully!"))}},{key:"duplicateForm",value:function(t){if(this.forms[t]){var e=this.forms[t],o=new Date,n="form_".concat(o.getTime()),r=_objectSpread(_objectSpread({},e),{},{id:n,createdAt:o.toISOString(),lastModified:o.toISOString(),date:this.formatDate(o)});this.forms[n]=r,this.saveToStorage(),this.renderForms(),this.updateStats(),this.showToast("Form duplicated successfully!")}}},{key:"changeMonth",value:function(t){this.currentMonth.setMonth(this.currentMonth.getMonth()+t),this.updateCurrentMonth(),this.renderForms()}},{key:"goToToday",value:function(){this.currentMonth=new Date,this.updateCurrentMonth(),this.renderForms()}},{key:"renderForms",value:function(){var t=document.getElementById("forms-container"),e=document.getElementById("empty-state"),o=this.getCurrentMonthForms();t.innerHTML="",0===o.length?e.classList.remove("hidden"):(e.classList.add("hidden"),o.forEach((function(e){var o=document.createElement("div");o.className="form-entry",o.innerHTML='\n                    <div class="form-header">\n                        <div class="form-date">Added on: '.concat(e.date,'</div>\n                        <div class="form-actions">\n                            <button onclick="formSystem.duplicateForm(\'').concat(e.id,"')\">Duplicate</button>\n                            <button onclick=\"formSystem.deleteForm('").concat(e.id,'\')">Delete</button>\n                        </div>\n                    </div>\n                    <div class="form-content">\n                        <textarea class="form-textarea" data-form-id="').concat(e.id,'" placeholder="Enter your comment here...">').concat(e.content,"</textarea>\n                    </div>\n                "),t.appendChild(o)})))}},{key:"updateStats",value:function(){var t=Object.keys(this.forms).length,e=this.getCurrentMonthForms().length;document.getElementById("total-forms").textContent=t,document.getElementById("month-forms").textContent=e}},{key:"showToast",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",o=document.getElementById("toast");document.getElementById("toast-message").textContent=t,o.className="toast ".concat(e),o.classList.add("show"),setTimeout((function(){o.classList.remove("show")}),3e3)}},{key:"exportData",value:function(){document.getElementById("export-modal").classList.add("show")}},{key:"closeExportModal",value:function(){document.getElementById("export-modal").classList.remove("show")}},{key:"exportToJSON",value:function(){var t=JSON.stringify(this.forms,null,2),e="data:application/json;charset=utf-8,"+encodeURIComponent(t),o=document.createElement("a");o.setAttribute("href",e),o.setAttribute("download","payroll-forms.json"),o.click(),this.closeExportModal()}},{key:"exportToCSV",value:function(){var t="id,createdAt,lastModified,monthKey,content,date\n";Object.values(this.forms).forEach((function(e){t+='"'.concat(e.id,'","').concat(e.createdAt,'","').concat(e.lastModified,'","').concat(e.monthKey,'","').concat(e.content.replace(/"/g,'""'),'","').concat(e.date,'"\n')}));var e="data:text/csv;charset=utf-8,"+encodeURIComponent(t),o=document.createElement("a");o.setAttribute("href",e),o.setAttribute("download","payroll-forms.csv"),o.click(),this.closeExportModal()}},{key:"exportToText",value:function(){var t="";Object.values(this.forms).forEach((function(e){t+="ID: ".concat(e.id,"\nCreated At: ").concat(e.createdAt,"\nLast Modified: ").concat(e.lastModified,"\nMonth: ").concat(e.monthKey,"\nDate: ").concat(e.date,"\nContent: ").concat(e.content,"\n\n")}));var e="data:text/plain;charset=utf-8,"+encodeURIComponent(t),o=document.createElement("a");o.setAttribute("href",e),o.setAttribute("download","payroll-forms.txt"),o.click(),this.closeExportModal()}},{key:"clearAllData",value:function(){confirm("Are you sure you want to clear all data?")&&(this.forms={},this.saveToStorage(),this.renderForms(),this.updateStats(),this.showToast("All data cleared successfully!"))}}])}(),formSystem=new FormManagementSystem;